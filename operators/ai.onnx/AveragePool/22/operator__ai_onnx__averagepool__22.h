//this file was generated by ../../../../../../../../connx/connx_ajit/scripts/onnx_generator/OperatorHeader.py
# ifndef OPERATOR_OPERATOR__AI_ONNX__AVERAGEPOOL__22_H
# define OPERATOR_OPERATOR__AI_ONNX__AVERAGEPOOL__22_H

# include "operators/operator.h"
# include "operators/operator_stub.h"
# include "operators/operator_info.h"

/**
 * ai.onnx operator 'AveragePool' version 22
 *
 * @param[in]  ctx  Operator context
 * @return          Status code
 *
 * AveragePool consumes an input tensor X and applies average pooling across
 *  the tensor according to kernel sizes, stride sizes, and pad lengths.
 *  average pooling consisting of computing the average on all values of a
 *  subset of the input tensor according to the kernel size and downsampling the
 *  data into the output tensor Y for further processing. The output spatial shape is calculated differently
 *  depending on whether explicit padding is used, where pads is employed, or auto padding is used, where auto_pad is utilized.
 *  With explicit padding (https://pytorch.org/docs/stable/generated/torch.nn.MaxPool2d.html?highlight=maxpool#torch.nn.MaxPool2d):
 *  ```
 *  output_spatial_shape[i] = floor((input_spatial_shape[i] + pad_shape[i] - dilation[i] * (kernel_shape[i] - 1) - 1) / strides_spatial_shape[i] + 1)
 *  ```
 *  or
 *  ```
 *  output_spatial_shape[i] = ceil((input_spatial_shape[i] + pad_shape[i] - dilation[i] * (kernel_shape[i] - 1) - 1) / strides_spatial_shape[i] + 1)
 *  ```
 *  if ceil_mode is enabled. `pad_shape[i]` is the sum of pads along axis `i`. Sliding windows that would start in the right padded region are ignored.
 * 
 *  `auto_pad` is a DEPRECATED attribute. If you are using them currently, the output spatial shape will be following when ceil_mode is enabled:
 *  ```
 *  VALID: output_spatial_shape[i] = ceil((input_spatial_shape[i] - ((kernel_spatial_shape[i] - 1) * dilations[i] + 1) + 1) / strides_spatial_shape[i])
 *  SAME_UPPER or SAME_LOWER: output_spatial_shape[i] = ceil(input_spatial_shape[i] / strides_spatial_shape[i])
 *  ```
 *  or when ceil_mode is disabled (https://www.tensorflow.org/api_docs/python/tf/keras/layers/AveragePooling2D):
 *  ```
 *  VALID: output_spatial_shape[i] = floor((input_spatial_shape[i] - ((kernel_spatial_shape[i] - 1) * dilations[i] + 1)) / strides_spatial_shape[i]) + 1
 *  SAME_UPPER or SAME_LOWER: output_spatial_shape[i] = floor((input_spatial_shape[i] - 1) / strides_spatial_shape[i]) + 1
 *  ```
 *  And pad shape will be following if `SAME_UPPER` or `SAME_LOWER`:
 *  ```
 *  pad_shape[i] = (output_spatial_shape[i] - 1) * strides_spatial_shape[i] + ((kernel_spatial_shape[i] - 1) * dilations[i] + 1) - input_spatial_shape[i]
 *  ```
 *  The output of each pooling window is divided by the number of elements (exclude pad when attribute count_include_pad is zero).
 * 
 * Constraint T:
 *   Constrain input and output types to float tensors.
 *   Allowed Types: tensor_bfloat16, tensor_double, tensor_float,
 *                  tensor_float16
 * Input T X:
 *   Input data tensor from the previous operator; dimensions for image case
 *   are (N x C x H x W), where N is the batch size, C is the number of
 *   channels, and H and W are the height and the width of the data. For non
 *   image case, the dimensions are in the form of (N x C x D1 x D2 ... Dn),
 *   where N is the batch size. Optionally, if dimension denotation is in
 *   effect, the operation expects the input data tensor to arrive with the
 *   dimension denotation of [DATA_BATCH, DATA_CHANNEL, DATA_FEATURE,
 *   DATA_FEATURE ...].
 *   Allowed Types: tensor_bfloat16, tensor_double, tensor_float,
 *                  tensor_float16
 * Output T Y:
 *   Output data tensor from average or max pooling across the input tensor.
 *   Dimensions will vary based on various kernel, stride, and pad sizes. Floor
 *   value of the dimension is used
 *   Allowed Types: tensor_bfloat16, tensor_double, tensor_float,
 *                  tensor_float16
 * Attribute STRING auto_pad (optional):
 *   auto_pad must be either NOTSET, SAME_UPPER, SAME_LOWER or VALID. Where
 *   default value is NOTSET, which means explicit padding is used. SAME_UPPER
 *   or SAME_LOWER mean pad the input so that `output_shape[i] =
 *   ceil(input_shape[i] / strides[i])` for each axis `i`. The padding is split
 *   between the two sides equally or almost equally (depending on whether it
 *   is even or odd). In case the padding is an odd number, the extra padding
 *   is added at the end for SAME_UPPER and at the beginning for SAME_LOWER.
 * 
 * Attribute INT ceil_mode (optional):
 *   Whether to use ceil or floor (default) to compute the output shape.
 * 
 * Attribute INT count_include_pad (optional):
 *   Whether include pad pixels when calculating values for the edges. Default
 *   is 0, doesn't count include pad.
 * 
 * Attribute INTS dilations (optional):
 *   Dilation value along each spatial axis of filter. If not present, the
 *   dilation defaults to 1 along each spatial axis.
 * 
 * Attribute INTS kernel_shape :
 *   The size of the kernel along each axis.
 * 
 * Attribute INTS pads (optional):
 *   Padding for the beginning and ending along each spatial axis, it can take
 *   any value greater than or equal to 0. The value represent the number of
 *   pixels added to the beginning and end part of the corresponding axis.
 *   `pads` format should be as follow [x1_begin, x2_begin...x1_end,
 *   x2_end,...], where xi_begin the number of pixels added at the beginning of
 *   axis `i` and xi_end, the number of pixels added at the end of axis `i`.
 *   This attribute cannot be used simultaneously with auto_pad attribute. If
 *   not present, the padding defaults to 0 along start and end of each spatial
 *   axis.
 * 
 * Attribute INTS strides (optional):
 *   Stride along each spatial axis. If not present, the stride defaults to 1
 *   along each spatial axis.
 *
 * @since version 22
 *
 * @see github/workspace/onnx/defs/nn/defs.cc:317
 * @see https://github.com/onnx/onnx/blob/master/docs/Operators.md#AveragePool
 */

operator_status
prepare_operator__ai_onnx__averagepool__22(
    node_context *ctx
);

extern operator_info info_operator__ai_onnx__averagepool__22;

typedef struct {
// no attributes
} context_operator__ai_onnx__averagepool__22;

operator_executer
resolve_operator__ai_onnx__averagepool__22(
    node_context *ctx
);

operator_status
execute_operator__ai_onnx__averagepool__22(
    node_context *ctx
);

operator_status
execute_operator__ai_onnx__averagepool__22__T_tensor_bfloat16(
    node_context *ctx
);

operator_status
execute_operator__ai_onnx__averagepool__22__T_tensor_double(
    node_context *ctx
);

operator_status
execute_operator__ai_onnx__averagepool__22__T_tensor_float(
    node_context *ctx
);

operator_status
execute_operator__ai_onnx__averagepool__22__T_tensor_float16(
    node_context *ctx
);

# endif